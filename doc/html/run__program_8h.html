<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>haigo: src/run_program.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>src/run_program.h File Reference</h1>  </div>
</div>
<div class="contents">
<div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="run__program_8h__dep__incl.png" border="0" usemap="#src_2run__program_8hdep" alt=""/></div>
<map name="src_2run__program_8hdep" id="src_2run__program_8hdep">
<area shape="rect" id="node3" href="main_8c.html" title="src/main.c" alt="" coords="5,83,93,112"/><area shape="rect" id="node5" href="run__program_8c.html" title="src/run_program.c" alt="" coords="117,83,256,112"/></map>
</div>

<p><a href="run__program_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="run__program_8h.html#a713840100e793ae1f2587d5abbf635ee">COUNT_KNOWN_COMMANDS</a>&nbsp;&nbsp;&nbsp;11</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Defines the number of known GTP commands.  <a href="#a713840100e793ae1f2587d5abbf635ee"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="run__program_8h.html#ac1f545534cdaab9094198a5dc2c2a79f">run</a> (int argc, char **argv)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Substitute for <a class="el" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="The main() function is only a wrapper for the run() function.">main()</a> function, because <a class="el" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="The main() function is only a wrapper for the run() function.">main()</a> itself cannot be unit-tested with check.  <a href="#ac1f545534cdaab9094198a5dc2c2a79f"></a><br/></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a713840100e793ae1f2587d5abbf635ee"></a><!-- doxytag: member="run_program.h::COUNT_KNOWN_COMMANDS" ref="a713840100e793ae1f2587d5abbf635ee" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COUNT_KNOWN_COMMANDS&nbsp;&nbsp;&nbsp;11</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Defines the number of known GTP commands. </p>

<p>Definition at line <a class="el" href="run__program_8h_source.html#l00005">5</a> of file <a class="el" href="run__program_8h_source.html">run_program.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ac1f545534cdaab9094198a5dc2c2a79f"></a><!-- doxytag: member="run_program.h::run" ref="ac1f545534cdaab9094198a5dc2c2a79f" args="(int argc, char **argv)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int run </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"> <em>argv</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Substitute for <a class="el" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="The main() function is only a wrapper for the run() function.">main()</a> function, because <a class="el" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="The main() function is only a wrapper for the run() function.">main()</a> itself cannot be unit-tested with check. </p>
<p>The <a class="el" href="run__program_8c.html#ac1f545534cdaab9094198a5dc2c2a79f" title="Substitute for main() function, because main() itself cannot be unit-tested with check.">run()</a> function performs the following tasks:</p>
<ol type="1">
<li>Initialization</li>
<li>STDOUT buffer size set to NULL</li>
<li>Checking command line arguments (like -h, -v, etc.)</li>
<li>Starting the working loop</li>
</ol>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>argc</em>&nbsp;</td><td>Number of command line arguments (same as for <a class="el" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="The main() function is only a wrapper for the run() function.">main()</a>). </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>argv</em>&nbsp;</td><td>Array of all command line arguments (same as for <a class="el" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="The main() function is only a wrapper for the run() function.">main()</a>). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>EXIT_SUCCESS | EXIT_FAILURE </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd>info check </dd></dl>

<p>Definition at line <a class="el" href="run__program_8c_source.html#l00080">80</a> of file <a class="el" href="run__program_8c_source.html">run_program.c</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keyword">struct </span><a class="code" href="structcommand.html">command</a> command_data;

    <span class="comment">// Initialization</span>
    <a class="code" href="board_8c.html#ac70f31e9f413033ba999d4eccb459cb5" title="Allocates memory for all board data structures.">init_board</a>(<a class="code" href="global__const_8h.html#acf9fdbe777d70427b1abbfac13c249d9" title="Defines the default board size.">BOARD_SIZE_DEFAULT</a>);
    <a class="code" href="run__program_8c.html#a4c6d2b52cb37198b390becc56f1e6142" title="Initializes all known GTP commands.">init_known_commands</a>();

    <span class="comment">// STDOUT must be unbuffered:</span>
    setbuf( stdout, NULL );

    <span class="comment">// Read command line arguments:</span>
    <a class="code" href="run__program_8c.html#a040c01612cc61fa6d082f246f07a22e4" title="Parses command line arguments.">read_opts</a>( argc, argv );

    <span class="comment">// Working loop:</span>
    <span class="keywordflow">while</span> ( <a class="code" href="run__program_8c.html#a8573b61fb976af69bdabd11cf835d9c6" title="If set to 1 the main control loop exits.">quit_program</a> == 0 ) {
        <a class="code" href="io_8c.html#af6dafebf6767ddb1f453059f63968cfa" title="Read GTP command from STDIN.">read_gtp_input</a>(&amp;command_data);

        <span class="comment">// Ignore empty lines:</span>
        <span class="keywordflow">if</span> ( <a class="code" href="io_8c.html#a65a3f2710b61f5e5a38f6439be41b29a">is_input_empty</a>() == <span class="keyword">true</span> ) {
            <span class="keywordflow">continue</span>;
        }

        <span class="keywordflow">if</span> ( <a class="code" href="io_8c.html#a2a55445d2f8582b642b0812b3350b7b4">get_output_error</a>() == <span class="keyword">false</span> ) {
            <a class="code" href="run__program_8c.html#a11413e5c3a3a9450976eb102a7c07c20" title="Selects the function that is associated with a certain GTP command.">select_command</a>(&amp;command_data);
        }

        <a class="code" href="io_8c.html#a84addba8fd5fd0fad9e2f8727ef48127">print_output</a>(command_data.id);
    }

    <a class="code" href="board_8c.html#a96dcf44b26f99e5b5f3ebfaa31bf7162">free_board</a>();

    <span class="keywordflow">return</span> EXIT_SUCCESS;
}
</pre></div></p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Jan 24 2012 09:35:24 for haigo by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
